# 梅花心易占卜应用 - MVP版本产品需求文档

## 1. 文档信息

### 1.1 版本历史
| 版本 | 日期 | 作者 | 变更内容 |
|------|------|------|----------|
| v0.1 | 2025-7-25 | 产品经理 | MVP版本需求文档 |

### 1.2 文档目的
本文档专门描述梅花心易占卜应用MVP版本的产品需求，为3天快速开发周期提供明确的功能边界和实现指导。

### 1.3 MVP目标
- **核心价值验证**：验证梅花易数AI占卜的用户接受度
- **快速上线**：3天内完成核心功能开发和部署
- **用户反馈收集**：获得50个种子用户的真实反馈
- **技术可行性验证**：验证AI解读生成的稳定性和质量

## 2. 产品概述

### 2.1 产品名称与定位
**产品名称**：梅花心易
**产品定位**：基于传统梅花易数的AI智能占卜决策助手

### 2.2 产品愿景与使命
**愿景**：成为中国最受信赖的智能占卜决策平台
**使命**：运用传统易学智慧结合AI技术，帮助用户在人生选择中获得指引

### 2.3 价值主张与独特卖点(USP)
- **专业算法**：基于正宗梅花易数算法的占卜逻辑
- **AI解读**：智能AI卜算师提供个性化解读
- **小而美**：专注梅花心易，不追求功能全面性

### 2.4 MVP目标平台---> ==这个地方还存疑==
- **主要平台**：移动端Web应用（H5）
- **优先适配**：iOS Safari、Android Chrome移动浏览器
- **设计原则**：移动优先，触屏操作优化
- **部署方式**：Sealos DevBox单实例部署
- **PWA支持**：支持添加到主屏幕，提供类原生体验

### 2.5 产品核心假设
- 用户对传统占卜文化有基础认知和兴趣
- AI解读能够提供比传统占卜更好的用户体验
- 免费体验模式能够吸引用户尝试使用

### 2.6 MVP商业模式
- **免费体验**：新用户免费10次占卜
- **功能限制**：MVP阶段暂不开放付费功能

## 3. 用户研究

### 3.1 目标用户画像

#### 3.1.1 核心用户群体
**主要用户群 - 年轻决策者（18-35岁）**
- **性别构成**：女性70%，男性30%
- **地域特征**：一二线城市为主
- **收入水平**：月收入3000-15000元
- **教育背景**：大专及以上学历
- **职业分布**：学生、白领、自由职业者

#### 3.1.2 核心需求
- 在面临选择时获得心理安慰和指引
- 快速便捷的占卜体验
- 可信赖的占卜结果解读

#### 3.1.3 主要痛点
- 传统占卜师费用高、不便接触
- 网上占卜产品质量参差不齐
- 缺乏专业的结果解读

### 3.2 核心使用场景
1. **感情困惑**：面临感情选择时寻求指引（移动端私密环境）
2. **职业发展**：工作机会选择、跳槽决策（通勤路上使用）
3. **学业考试**：专业选择、考试准备（宿舍、图书馆等场所）
4. **日常决策**：重要选择的心理支持（随时随地的即时需求）

## 4. 市场与竞品分析

### 4.1 市场规模
- 中国占卜市场规模约100亿元
- 移动端用户占比超过80%

### 4.2 主要竞争对手
**测测**：
- 优势：功能全面、用户基数大
- 劣势：功能复杂、专业性不足

### 4.3 差异化策略
- 专注梅花易数的专业性
- AI解读的个性化体验
- 小而美的产品理念

## 5. 产品功能需求

### 5.1 功能架构
```
梅花心易MVP应用
├── 用户管理模块
│   ├── 注册登录
│   └── 用户资料
├── 占卜核心模块
│   ├── 问题输入
│   ├── 算法计算
│   ├── AI解读
│   └── 结果展示
└── 历史记录模块
```

### 5.2 核心功能详述

#### 5.2.1 用户注册登录模块
**功能描述**：作为新用户，我想要通过手机号或邮箱快速注册账号，以便开始使用占卜服务

**用户价值**：
- 快速注册流程：45-90秒内完成注册
- 双重选择保障：手机号和邮箱两种方式
- 移动端优化：针对移动设备优化的注册体验

**功能逻辑与规则**：
- 手机号格式验证（支持+86格式）
- 短信验证码发送（60秒间隔限制）
- 邮箱格式验证（支持主流邮箱服务商）
- 邮箱验证码发送（验证码有效期10分钟）
- 密码强度要求：8-20位，包含字母数字
- 登录状态保持7天

**数据库设计**：
```javascript
User: {
  _id: ObjectId,
  phone: String,           // 手机号（唯一索引）
  email: String,           // 邮箱（唯一索引）
  password: String,        // 密码（BCrypt加密）
  nickname: String,        // 用户昵称
  gender: String,          // 性别
  birthDate: Date,         // 出生日期
  freeCount: Number,       // 免费次数
  registerType: String,    // 注册方式：phone/email
  createdAt: Date,
  updatedAt: Date
}
```

**技术依赖**：
- 短信服务：阿里云短信服务
- 邮件服务：阿里云邮件推送
- JWT token认证
- 密码加密库（BCrypt）

**验收标准**：
- 注册成功率>95%
- 登录响应时间<2秒
- 短信验证码到达率>95%

#### 5.2.2 AI占卜核心模块
**功能描述**：作为用户，我想要输入我的问题并获得基于梅花易数的占卜结果和AI解读

**用户价值**：
- 专业的梅花易数占卜算法
- 个性化的AI解读服务
- 直观的结果展示

**功能逻辑与规则**：
- 问题内容审核（敏感词过滤）
- 梅花易数算法计算
- 卦象生成和解析
- AI解读生成
- 免费次数扣减逻辑

**数据库设计**：
```javascript
Divination: {
  _id: ObjectId,
  userId: ObjectId,
  question: String,
  hexagram: Object,
  aiInterpretation: String,
  createdAt: Date
}
```

**技术依赖**：
- Claude 3.7 Sonnet API
- 内容审核API

**验收标准**：
- 占卜成功率>99%
- AI解读生成时间<10秒
- 内容审核准确率>95%

#### 5.2.3 历史记录模块
**功能描述**：作为用户，我想要查看我的历史占卜记录，以便回顾和对比

**功能逻辑**：
- 按时间倒序展示历史记录
- 支持查看详细占卜结果
- 显示占卜问题和AI解读

**验收标准**：
- 记录展示完整准确
- 页面加载时间<3秒

## 6. 用户流程与交互设计

### 6.1 核心用户旅程
```
发现产品 → 注册账号 → 完善资料 → 输入问题 → 查看结果 → 查看历史
```

### 6.2 界面设计要求
- **整体风格**：现代简约，融入传统易学元素
- **色彩方案**：以深蓝、金色为主色调
- **关键页面**：
  - 首页突出核心功能入口
  - 占卜页面营造仪式感
  - 结果页面重点展示卦象和解读

### 6.3 交互设计原则
- **移动优先**：专为移动端设计，触屏操作优化
- **简洁性**：每个页面专注单一任务
- **反馈性**：及时的操作反馈和状态提示
- **手势友好**：支持滑动、点击等移动端手势操作

## 7. 非功能需求

### 7.1 性能需求
- **响应时间**：页面加载<3秒，占卜结果生成<10秒
- **并发量**：支持100并发用户
- **稳定性**：系统可用性>99%

### 7.2 安全需求
- **数据加密**：用户密码BCrypt加密
- **认证授权**：JWT token认证
- **隐私保护**：用户数据匿名化处理

### 7.3 兼容性要求
- **移动浏览器支持**：iOS Safari 12+、Android Chrome 70+
- **屏幕适配**：支持320px-414px移动端屏幕（主要）
- **网络适应**：支持3G/4G/WiFi网络环境，弱网优化
- **设备兼容**：支持主流Android和iOS设备

## 8. 技术架构

### 8.1 技术栈
- **前端**：Vue.js 3 + Vite + 移动端UI组件库
- **后端**：Node.js + Express.js
- **数据库**：MongoDB
- **部署**：Sealos DevBox
- **AI服务**：Claude 3.7 Sonnet API
- **移动端优化**：PWA配置、触屏事件处理、移动端性能优化

### 8.2 系统集成
- **邮件服务**：阿里云邮件推送
- **短信服务**：阿里云短信服务
- **内容审核**：百度内容审核API

### 8.3 数据模型
```javascript
// 核心实体关系
User 1:N Divination
```

## 9. 验收标准

### 9.1 功能验收标准
| 功能模块 | 验收标准 | 优先级 |
|----------|----------|--------|
| 用户注册 | 注册成功率>95% | P0 |
| 占卜核心 | 占卜成功率>99% | P0 |
| AI解读 | 生成时间<10秒 | P0 |

### 9.2 性能验收标准
- 页面加载时间<3秒
- API响应时间<2秒
- 系统可用性>99%

### 9.3 用户体验验收标准
- 新用户5分钟内完成首次占卜
- 用户界面友好易用
- 错误提示清晰明确

## 10. MVP成功指标

### 10.1 关键指标
- **用户注册**：获得50个种子用户
- **功能使用**：占卜成功率>90%
- **用户反馈**：用户满意度>3.5/5.0
- **技术稳定**：系统无重大故障

### 10.2 数据收集
- 用户注册转化率
- 占卜功能使用频率
- AI解读生成成功率
- 用户停留时间

## 11. 开发计划

### 11.1 3天开发计划
**Day 1**：
- 用户注册登录功能
- 基础数据库设计
- 前端框架搭建

**Day 2**：
- 梅花易数算法实现
- AI解读集成
- 占卜流程开发

**Day 3**：
- 历史记录功能
- UI/UX优化
- 测试和部署

### 11.2 技术风险控制
- Claude API备用方案准备
- 数据库连接池配置
- 错误处理机制完善

## 12. 后续迭代方向

### 12.1 Beta版本规划
- 支付系统集成
- 邀请奖励机制
- 微信登录支持

### 12.2 功能扩展储备
- 多种占卜方式
- 社交分享功能
- 个人运势报告

---

**注意**：本文档专门针对MVP版本，所有功能和需求都以3天快速开发为目标，确保核心价值验证的同时避免功能蔓延。
